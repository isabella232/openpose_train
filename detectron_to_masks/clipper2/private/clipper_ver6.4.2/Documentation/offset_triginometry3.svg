<svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" id="svg2" width="800" height="600" version="1.1"><metadata id="metadata7"/><g id="layer1" transform="translate(-407.6,90.95)"><path style="color:#000;fill:none;stroke:#000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:4,4;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3907" d="m 604.8,209.6 85.8,-55.7"/><path style="color:#000;fill:none;stroke:#000;stroke-width:1.8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path2985" d="M 420.4,326.1 603.7,10.08 757.6,263.6"/><text style="font-size:20px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3861" x="624.097" y="215.065" xml:space="preserve"><tspan id="tspan3863" x="624.097" y="215.065" style="font-weight:700;-inkscape-font-specification:Tahoma Bold">ß</tspan></text><path id="path3857-2" d="m 603,29.9 15,15.8 -10,0 0,155.1 -10,0 0,-155.1 -10,0 z" style="color:#000;fill:#ff0;fill-opacity:1;stroke:#000;stroke-width:1.776;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"/><text style="font-size:10px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3952" x="682.2" y="261.375" xml:space="preserve"><tspan id="tspan3954" x="682.2" y="261.375" style="font-size:14px">delta</tspan></text><text style="font-size:10px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3977" x="698.2" y="151.875" xml:space="preserve"><tspan id="tspan3979" x="698.2" y="151.875" style="font-size:14px">c</tspan></text><text style="font-size:10px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3977-5-1-2" x="599.761" y="3.396" xml:space="preserve"><tspan id="tspan3979-1-5-7" x="599.761" y="3.396" style="font-size:14px">b</tspan></text><text style="font-size:14px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text4077" x="766" y="-49.35" xml:space="preserve"><tspan id="tspan4087" x="766" y="-49.35">When &apos;mitering&apos; offset polygons, the maximum distance </tspan><tspan id="tspan3063" x="766" y="-31.85">point &apos;b&apos; can be from point &apos;a&apos; is set by &apos;limit&apos; where limit </tspan><tspan id="tspan3065" x="766" y="-14.35">is a multiple of delta. Therefore, for any given angle</tspan><tspan id="tspan3067" x="766" y="3.15">we need to know if length(ab) &gt; limit * delta.</tspan><tspan id="tspan3890" x="766" y="38.15">Find the largest angle ß (or smallest Ø since Ø = pi - ß) </tspan><tspan id="tspan3904" x="766" y="55.65">for a given limit, expressing ß as sin(ß) or cos(ß) since</tspan><tspan id="tspan3908" x="766" y="73.15">these can easily be derived from cross or dot products </tspan><tspan id="tspan3916" x="766" y="90.65">respectively.</tspan><tspan id="tspan3884" x="766" y="98.598" style="font-size:4px"> </tspan><tspan id="tspan3888" x="766" y="113.15">angle(abc) = Ø/2 </tspan><tspan id="tspan3083" x="766" y="130.65">length(ab) = limit * delta</tspan><tspan id="tspan3087" x="766" y="148.15">length(ac) = delta</tspan><tspan id="tspan3089" x="766" y="165.65">sin(Ø/2) = delta / (limit * delta) = 1 / limit</tspan><tspan id="tspan3157" x="766" y="183.15">Given that sin(Ø/2) = sqrt((1-cos(Ø))/2) **</tspan><tspan id="tspan3151" x="766" y="200.65">1 / limit = sqrt((1-cos(Ø))/2)</tspan><tspan id="tspan3161" x="766" y="218.15">limit = sqrt(2 / (1-cos(Ø)))</tspan><tspan id="tspan3815" x="766" y="235.65" style="font-weight:400">1-cos(Ø) = 2 / sqr(limit) </tspan><tspan id="tspan3043" x="766" y="253.15">Since Ø = pi - ß ...</tspan><tspan id="tspan3868" x="766" y="270.65">1-cos(pi - ß) = 2 / sqr(limit)</tspan><tspan id="tspan3047" x="766" y="288.15">and given cos(pi-ß) = -cos(ß) ** ... </tspan><tspan style="font-size:4px;font-weight:400" id="tspan3823" x="766" y="296.098"> </tspan><tspan style="font-weight:700" id="tspan3122" x="766" y="310.65">1+cos(ß) = 2 / sqr(limit) </tspan><tspan style="font-size:4px;font-weight:400" id="tspan3118" x="766" y="318.598"> </tspan><tspan style="font-weight:400" id="tspan3114" x="766" y="333.15">cos(ß) = 2 / sqr(limit) - 1</tspan><tspan style="font-weight:400" id="tspan3066" x="766" y="368.15">Example: if miter limit = 2 (ie 2 times delta) then </tspan><tspan style="font-weight:400" id="tspan3070" x="766" y="385.65">cos(ß) = (2 / 4) -1 = -0.5 and so ß = 120 degrees. </tspan><tspan style="font-weight:400" id="tspan3072" x="766" y="403.15">Therefore, when ß &gt; 120 deg. (or Ø &lt; 60 deg.), the</tspan><tspan style="font-weight:400" id="tspan3090" x="766" y="420.65">distance point &apos;b&apos; would be from point &apos;a&apos; would exceed </tspan><tspan style="font-weight:400" id="tspan3094" x="766" y="438.15">the limit.</tspan><tspan id="tspan3171" x="766" y="446.098" style="font-size:4px;font-weight:700"> </tspan><tspan id="tspan3163" x="766" y="462.785" style="font-size:11px">** see http://en.wikipedia.org/wiki/List_of_trigonometric_identities</tspan></text><path style="color:#000;fill:none;stroke:#000;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:2,2;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path4091" d="m 684.7,144.1 -10.6,5.9 5.4,10.1"/><text style="font-size:10px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3977-1" x="588.197" y="208.672" xml:space="preserve"><tspan id="tspan3979-7" x="588.197" y="208.672" style="font-size:14px">a</tspan></text><g id="g3841" transform="translate(400,-20.7)"><path id="path3026" d="M 175.6,276.8 233.7,175.7" style="color:#000;fill:none;stroke:#000;stroke-width:1.8;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:7.2,7.2;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"/><path id="path3809" d="m 227.7,188.7 c 27.7,17.9 31.6,57.6 -0.5,76.7" style="color:#000;fill:none;stroke:#000;stroke-width:1.81;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:7.24,7.24;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate"/></g><path style="color:#000;fill:#0f0;fill-opacity:1;stroke:#000;stroke-width:2.1383;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path3777-9" d="m 724.8,212.4 -9.2,24.2 -5.6,-8.3 -46.8,31.5 5.4,8.3 -26,-0.8 9.4,-24.3 5.5,8.3 47,-31.3 -5.6,-8.3 z"/><text style="font-size:14px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma" id="text3845" x="595.669" y="246.41" xml:space="preserve"><tspan id="tspan3847" x="595.669" y="246.41" style="font-size:20px;font-weight:700;-inkscape-font-specification:Tahoma Bold">Ø</tspan></text><text id="text3849" x="595.669" y="246.41" xml:space="preserve" style="font-size:14px;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:125%;letter-spacing:0;word-spacing:0;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000;fill:#000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1px;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Tahoma;-inkscape-font-specification:Tahoma"><tspan style="font-size:20px;font-weight:700;-inkscape-font-specification:Tahoma Bold" id="tspan3851" x="595.669" y="246.41">Ø</tspan></text><path style="color:#000;fill:none;stroke:#000;stroke-width:3.6;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate" id="path2985-1-1" d="M 530.8,333.3 603,210 677.5,330.2"/></g></svg>